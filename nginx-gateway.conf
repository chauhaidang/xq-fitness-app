# auto-generated by xq-test-infra gateway
worker_processes 1;
error_log /var/log/nginx/error.log warn;
events { worker_connections 1024; }
http {
    sendfile on;
    tcp_nopush on;
    include /etc/nginx/mime.types;
    default_type application/octet-stream;

    upstream xq-fitness-db_upstream {
    server xq-fitness-db:5432;
}

    upstream xq-fitness-read-service_upstream {
    server xq-fitness-read-service:8080;
}

    upstream xq-fitness-write-service_upstream {
    server xq-fitness-write-service:3000;
}

    server {
        listen 80;
        server_name _;

    location /xq-fitness-db/ {
        proxy_pass http://xq-fitness-db_upstream/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    location /xq-fitness-read-service/ {
        proxy_pass http://xq-fitness-read-service_upstream/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    location /xq-fitness-write-service/ {
        proxy_pass http://xq-fitness-write-service_upstream/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
    }
}
